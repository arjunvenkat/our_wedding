<p id="notice"><%= notice %></p>

<h1>Listing Guests</h1>

<table>
  <thead>
    <tr>
      <th>Sangeet</th>
      <th>Friday dinner</th>
      <th>Ceremony</th>
      <th>Reception</th>
      <th>Salutation</th>
      <th>First</th>
      <th>Last</th>
      <th>Email</th>
      <th>Household</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% sangeet = Event.find_by(name: EVENTS[:sangeet]) %>
    <% rehearsal_dinner = Event.find_by(name: EVENTS[:rehearsal_dinner]) %>
    <% ceremony = Event.find_by(name: EVENTS[:ceremony]) %>
    <% reception = Event.find_by(name: EVENTS[:reception]) %>
    <% @guests.each do |guest| %>
      <tr>
        <td><%= "x" if guest.rsvps.where(event_id: sangeet.id).present? %></td>
        <td><%= "x" if guest.rsvps.where(event_id: rehearsal_dinner.id).present? %></td>
        <td><%= "x" if guest.rsvps.where(event_id: ceremony.id).present? %></td>
        <td><%= "x" if guest.rsvps.where(event_id: reception.id).present? %></td>
        <td><%= guest.salutation %></td>
        <td><%= guest.first %></td>
        <td><%= guest.last %></td>
        <td><%= guest.email %></td>
        <td><%= guest.household.full_name %></td>
        <td><%= link_to 'Show', guest %></td>
        <td><%= link_to 'Edit', edit_guest_path(guest) %></td>
        <td><%= link_to 'Destroy', guest, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Guest', new_guest_path %>
